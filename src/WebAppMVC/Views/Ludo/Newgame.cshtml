@model WebAppMVC.Models.GameInfo
@{
    ViewData["Title"] = "Newgame";
    Layout = "_HomeLayout";
}

<div class="text-center">
    
    <h1>Creategame!</h1>
    <textarea>Your Name</textarea>
    <button id="StartButton">LETS FUCKIN GO</button>
</div>

<script>
    document.getElementById("StartButton").onclick = function () {

        if (document.cookie != "") {
            console.log("You already have a game running.");

            var gameId = document.cookie;
            window.location.href = "lobby/" + gameId;
        }
        else {
            var http = new XMLHttpRequest();
            var url = 'https://ludogame.azurewebsites.net/api/ludo/createnewgame';

            http.open("POST", url);
            http.send();

            http.onreadystatechange =(e)=> {

                // do something with game id
                var gameId = http.response;
                document.cookie = gameId;

                window.location.href = "lobby/" + gameId;
            }
        }
    }
</script>