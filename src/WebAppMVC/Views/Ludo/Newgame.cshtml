
@{
    ViewData["Title"] = "Newgame";
    Layout = "_HomeLayout";
}

<div class="text-center">
    
    <h1>Creategame!</h1>
    <textarea id="playerName">Your Name</textarea>
    <button id="startButton">LETS FUCKIN GO</button>

</div>

<script>
    document.getElementById("startButton").onclick = function () {

        if (document.cookie != "") {
            console.log("You already have a game running.");
        }
        else {
            var http = new XMLHttpRequest();
            var url = 'https://ludogame.azurewebsites.net/api/ludo/createnewgame';

            http.open("POST", url);
            http.send();

            http.onreadystatechange =(e)=> {

                var gameId = http.response;
                var playerName = document.getElementById("playerName").value;

                document.cookie = "gameId=" + gameId;
                document.cookie = "playerName=" + playerName;
            }
        }
    }
</script>